pipeline {
    agent any    
    stages {       
                 
       
            stage ('Start Zalenium'){
                steps{
                    bat 'docker run --rm -ti --name zalenium -p 4444:4444 -v /var/run/docker.sock:/var/run/docker.sock -v /C/Users/ZaleniumVideos:/Users/ZaleniumVideos --privileged dosel/zalenium start'
                }
            }
            stage ('Run Tests'){
                steps{
                    bat 'mvn test'
                }
            }
            stage ('Stop Zalenium'){
                steps{
                    bat 'docker stop zalenium'
                }
            }
    }
}